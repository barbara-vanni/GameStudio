import pygame
import sys
from player import *
from raycasting import *


# Definition ecran (constante)

# SCREEN_HEIGHT = 800
# SCREEN_WIDTH = 800
size = RES_X, RES_Y
MAP_SIZE = 20
TILE_SIZE = int((RES_X / 2) / MAP_SIZE)

window = pygame.display.set_mode((size))


# map = [
#     [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
#     [1,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,1],
#     [1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
#     [1,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
#     [1,0,0,2,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,1],
#     [1,0,0,2,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1],
#     [1,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,1],
#     [1,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,1],
#     [1,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,1],
#     [1,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,1],
#     [1,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,1],
#     [1,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,1],
#     [1,0,0,2,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,1],
#     [1,0,0,2,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1],
#     [1,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,1],
#     [1,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,1],
#     [1,0,0,2,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,1],
#     [1,0,0,2,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1],
#     [1,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,1],
#     [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
#     ]

map =  [
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    [1,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,1],
    [1,1,1,1,1,1,1,0,1,0,1,0,0,0,1,0,1,1,1,1],
    [1,0,0,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,0,1],
    [1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,1,0,1],
    [1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1],
    [1,1,1,0,1,1,1,0,1,1,1,1,1,1,0,1,0,1,0,1],
    [1,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,1,0,1],
    [1,1,1,0,1,1,1,0,1,0,1,1,1,1,0,1,0,0,0,1],
    [1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,1,1],
    [1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,0,0,0,1],
    [1,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,1,0,1],
    [1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,1,0,1],
    [1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,0,1],
    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
]




# initialisation
pygame.init()
pg.mouse.set_visible(False)
pg.event.set_grab(True)    #Pour que la souris ne sorte pas de l'Ã©cran


# Sortie et fin de jeu
clock = pygame.time.Clock()

player = Player(8,11)



while True :
    for event in pygame.event.get():
        if event.type == pygame.QUIT or (event.type == pygame.KEYDOWN and event.key == pygame.K_ESCAPE):
            pygame.quit()
            sys.exit()
    
    window.fill((0,0,0))

    frame_time = clock.tick()
    player.movement(frame_time, map)
    raycasting(window, map, player)      
    pygame.display.flip()
    # pygame.display.update()
    pygame.display.set_caption("GAME STUDIO FPS : " + str(int(clock.get_fps())))

